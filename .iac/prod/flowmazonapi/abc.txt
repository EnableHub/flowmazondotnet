{
  "format_version": "1.0",
  "terraform_version": "1.12.2",
  "values": {
    "root_module": {
      "resources": [
        {
          "address": "data.azurerm_key_vault.vault",
          "mode": "data",
          "type": "azurerm_key_vault",
          "name": "vault",
          "provider_name": "registry.terraform.io/hashicorp/azurerm",
          "schema_version": 0,
          "values": {
            "access_policy": [],
            "enable_rbac_authorization": true,
            "enabled_for_deployment": false,
            "enabled_for_disk_encryption": false,
            "enabled_for_template_deployment": false,
            "id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.KeyVault/vaults/kvflowmazonprod",
            "location": "eastus2",
            "name": "kvflowmazonprod",
            "network_acls": [],
            "public_network_access_enabled": true,
            "purge_protection_enabled": true,
            "resource_group_name": "rg-flowmazon-supporting-prod",
            "sku_name": "standard",
            "tags": {},
            "tenant_id": "cb65b5b1-7b37-4b02-a6b9-07b1d0b2d112",
            "timeouts": null,
            "vault_uri": "https://kvflowmazonprod.vault.azure.net/"
          },
          "sensitive_values": {
            "access_policy": [],
            "network_acls": [],
            "tags": {}
          }
        },
        {
          "address": "data.azurerm_key_vault_secret.connstr_for_api",
          "mode": "data",
          "type": "azurerm_key_vault_secret",
          "name": "connstr_for_api",
          "provider_name": "registry.terraform.io/hashicorp/azurerm",
          "schema_version": 0,
          "values": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://kvflowmazonprod.vault.azure.net/secrets/flowmazon-db-connection-string-for-api/83a8876eb5f54fa58480eb390bc6d588",
            "key_vault_id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.KeyVault/vaults/kvflowmazonprod",
            "name": "flowmazon-db-connection-string-for-api",
            "not_before_date": null,
            "resource_id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.KeyVault/vaults/kvflowmazonprod/secrets/flowmazon-db-connection-string-for-api/versions/83a8876eb5f54fa58480eb390bc6d588",
            "resource_versionless_id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.KeyVault/vaults/kvflowmazonprod/secrets/flowmazon-db-connection-string-for-api",
            "tags": {},
            "timeouts": null,
            "value": "Server=ep-spring-meadow-a8uzf28s.eastus2.azure.neon.tech;Port=5432;Database=flowmazondb;User Id=flowmazon_app_user;Password=npg_8MPC0jpEfteQ",
            "version": "83a8876eb5f54fa58480eb390bc6d588",
            "versionless_id": "https://kvflowmazonprod.vault.azure.net/secrets/flowmazon-db-connection-string-for-api"
          },
          "sensitive_values": {
            "tags": {},
            "value": true
          }
        },
        {
          "address": "data.azurerm_resource_group.supporting_rg",
          "mode": "data",
          "type": "azurerm_resource_group",
          "name": "supporting_rg",
          "provider_name": "registry.terraform.io/hashicorp/azurerm",
          "schema_version": 0,
          "values": {
            "id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod",
            "location": "eastus2",
            "managed_by": "",
            "name": "rg-flowmazon-supporting-prod",
            "tags": {},
            "timeouts": null
          },
          "sensitive_values": {
            "tags": {}
          }
        },
        {
          "address": "data.azurerm_user_assigned_identity.aca_app_managed_identity",
          "mode": "data",
          "type": "azurerm_user_assigned_identity",
          "name": "aca_app_managed_identity",
          "provider_name": "registry.terraform.io/hashicorp/azurerm",
          "schema_version": 0,
          "values": {
            "client_id": "631c7b16-9efc-4948-949a-05d6436f8322",
            "id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.ManagedIdentity/userAssignedIdentities/flowmazon_api_managed_identity",
            "location": "eastus2",
            "name": "flowmazon_api_managed_identity",
            "principal_id": "2bf4d805-6e79-428f-96ed-08f49f32891d",
            "resource_group_name": "rg-flowmazon-supporting-prod",
            "tags": {},
            "tenant_id": "cb65b5b1-7b37-4b02-a6b9-07b1d0b2d112",
            "timeouts": null
          },
          "sensitive_values": {
            "tags": {}
          }
        },
        {
          "address": "data.cloudflare_ip_ranges.cloudflare",
          "mode": "data",
          "type": "cloudflare_ip_ranges",
          "name": "cloudflare",
          "provider_name": "registry.terraform.io/cloudflare/cloudflare",
          "schema_version": 0,
          "values": {
            "etag": "38f79d050aa027e3be3865e495dcc9bc",
            "ipv4_cidrs": [
              "173.245.48.0/20",
              "103.21.244.0/22",
              "103.22.200.0/22",
              "103.31.4.0/22",
              "141.101.64.0/18",
              "108.162.192.0/18",
              "190.93.240.0/20",
              "188.114.96.0/20",
              "197.234.240.0/22",
              "198.41.128.0/17",
              "162.158.0.0/15",
              "104.16.0.0/13",
              "104.24.0.0/14",
              "172.64.0.0/13",
              "131.0.72.0/22"
            ],
            "ipv6_cidrs": [
              "2400:cb00::/32",
              "2606:4700::/32",
              "2803:f800::/32",
              "2405:b500::/32",
              "2405:8100::/32",
              "2a06:98c0::/29",
              "2c0f:f248::/32"
            ],
            "jdcloud_cidrs": null,
            "networks": null
          },
          "sensitive_values": {
            "ipv4_cidrs": [
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false,
              false
            ],
            "ipv6_cidrs": [
              false,
              false,
              false,
              false,
              false,
              false,
              false
            ]
          }
        },
        {
          "address": "azurerm_container_app.acaapp",
          "mode": "managed",
          "type": "azurerm_container_app",
          "name": "acaapp",
          "provider_name": "registry.terraform.io/hashicorp/azurerm",
          "schema_version": 0,
          "values": {
            "container_app_environment_id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-api-prod/providers/Microsoft.App/managedEnvironments/aca-env-flowmazonapi-prod",
            "custom_domain_verification_id": "DC80F36B4BA4F34C982EFCBC52A0BCF7BA6636E110835DDEB5A452D26F4E6DFF",
            "dapr": [],
            "id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-api-prod/providers/Microsoft.App/containerApps/aca-app-flowmazonapi-prod",
            "identity": [
              {
                "identity_ids": [
                  "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.ManagedIdentity/userAssignedIdentities/flowmazon_api_managed_identity"
                ],
                "principal_id": "58df038e-4ed5-437f-89ed-98703ca1f0bb",
                "tenant_id": "cb65b5b1-7b37-4b02-a6b9-07b1d0b2d112",
                "type": "SystemAssigned, UserAssigned"
              }
            ],
            "ingress": [
              {
                "allow_insecure_connections": false,
                "client_certificate_mode": "require",
                "custom_domain": [],
                "exposed_port": 0,
                "external_enabled": true,
                "fqdn": "aca-app-flowmazonapi-prod.wonderfulmoss-56d829f4.eastus2.azurecontainerapps.io",
                "ip_security_restriction": [
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "103.21.244.0/22",
                    "name": "Cloudflare-1"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "172.64.0.0/13",
                    "name": "Cloudflare-10"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "173.245.48.0/20",
                    "name": "Cloudflare-11"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "188.114.96.0/20",
                    "name": "Cloudflare-12"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "190.93.240.0/20",
                    "name": "Cloudflare-13"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "197.234.240.0/22",
                    "name": "Cloudflare-14"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "198.41.128.0/17",
                    "name": "Cloudflare-15"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "103.22.200.0/22",
                    "name": "Cloudflare-2"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "103.31.4.0/22",
                    "name": "Cloudflare-3"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "104.16.0.0/13",
                    "name": "Cloudflare-4"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "104.24.0.0/14",
                    "name": "Cloudflare-5"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "108.162.192.0/18",
                    "name": "Cloudflare-6"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "131.0.72.0/22",
                    "name": "Cloudflare-7"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "141.101.64.0/18",
                    "name": "Cloudflare-8"
                  },
                  {
                    "action": "Allow",
                    "description": "One of the CloudFlare IP ranges",
                    "ip_address_range": "162.158.0.0/15",
                    "name": "Cloudflare-9"
                  }
                ],
                "target_port": 8080,
                "traffic_weight": [
                  {
                    "label": "",
                    "latest_revision": true,
                    "percentage": 100,
                    "revision_suffix": ""
                  }
                ],
                "transport": "auto"
              }
            ],
            "latest_revision_fqdn": "aca-app-flowmazonapi-prod--z183vd2.wonderfulmoss-56d829f4.eastus2.azurecontainerapps.io",
            "latest_revision_name": "aca-app-flowmazonapi-prod--z183vd2",
            "location": "eastus2",
            "max_inactive_revisions": 0,
            "name": "aca-app-flowmazonapi-prod",
            "outbound_ip_addresses": [
              "135.232.55.8"
            ],
            "registry": [
              {
                "identity": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.ManagedIdentity/userAssignedIdentities/flowmazon_api_managed_identity",
                "password_secret_name": "",
                "server": "acrflowmazonprod.azurecr.io",
                "username": ""
              }
            ],
            "resource_group_name": "rg-flowmazon-api-prod",
            "revision_mode": "Multiple",
            "secret": [
              {
                "identity": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-supporting-prod/providers/Microsoft.ManagedIdentity/userAssignedIdentities/flowmazon_api_managed_identity",
                "key_vault_secret_id": "https://kvflowmazonprod.vault.azure.net/secrets/flowmazon-db-connection-string-for-api/83a8876eb5f54fa58480eb390bc6d588",
                "name": "flowmazon-db-connection-string-for-api",
                "value": ""
              }
            ],
            "tags": null,
            "template": [
              {
                "azure_queue_scale_rule": [],
                "container": [
                  {
                    "args": null,
                    "command": null,
                    "cpu": 0.5,
                    "env": [
                      {
                        "name": "ALLOWED_CORS_ORIGINS",
                        "secret_name": "",
                        "value": "http://localhost:3000"
                      },
                      {
                        "name": "ConnectionStrings__FlowmazonDB",
                        "secret_name": "flowmazon-db-connection-string-for-api",
                        "value": ""
                      }
                    ],
                    "ephemeral_storage": "2Gi",
                    "image": "acrflowmazonprod.azurecr.io/flowmazondotnet-flowmazonbackend:v1.0.1",
                    "liveness_probe": [],
                    "memory": "1Gi",
                    "name": "flowmazonapi",
                    "readiness_probe": [],
                    "startup_probe": [],
                    "volume_mounts": []
                  }
                ],
                "custom_scale_rule": [],
                "http_scale_rule": [],
                "init_container": [],
                "max_replicas": 10,
                "min_replicas": 0,
                "revision_suffix": "",
                "tcp_scale_rule": [],
                "termination_grace_period_seconds": 0,
                "volume": []
              }
            ],
            "timeouts": null,
            "workload_profile_name": ""
          },
          "sensitive_values": {
            "custom_domain_verification_id": true,
            "dapr": [],
            "identity": [
              {
                "identity_ids": [
                  false
                ]
              }
            ],
            "ingress": [
              {
                "custom_domain": [],
                "ip_security_restriction": [
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {},
                  {}
                ],
                "traffic_weight": [
                  {}
                ]
              }
            ],
            "outbound_ip_addresses": [
              false
            ],
            "registry": [
              {}
            ],
            "secret": true,
            "template": [
              {
                "azure_queue_scale_rule": [],
                "container": [
                  {
                    "env": [
                      {},
                      {}
                    ],
                    "liveness_probe": [],
                    "readiness_probe": [],
                    "startup_probe": [],
                    "volume_mounts": []
                  }
                ],
                "custom_scale_rule": [],
                "http_scale_rule": [],
                "init_container": [],
                "tcp_scale_rule": [],
                "volume": []
              }
            ]
          },
          "depends_on": [
            "azurerm_container_app_environment.acaenv",
            "azurerm_resource_group.rg",
            "data.azurerm_key_vault.vault",
            "data.azurerm_key_vault_secret.connstr_for_api",
            "data.azurerm_resource_group.supporting_rg",
            "data.azurerm_user_assigned_identity.aca_app_managed_identity",
            "data.cloudflare_ip_ranges.cloudflare"
          ]
        },
        {
          "address": "azurerm_container_app_environment.acaenv",
          "mode": "managed",
          "type": "azurerm_container_app_environment",
          "name": "acaenv",
          "provider_name": "registry.terraform.io/hashicorp/azurerm",
          "schema_version": 0,
          "values": {
            "custom_domain_verification_id": "DC80F36B4BA4F34C982EFCBC52A0BCF7BA6636E110835DDEB5A452D26F4E6DFF",
            "dapr_application_insights_connection_string": "",
            "default_domain": "wonderfulmoss-56d829f4.eastus2.azurecontainerapps.io",
            "docker_bridge_cidr": "",
            "id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-api-prod/providers/Microsoft.App/managedEnvironments/aca-env-flowmazonapi-prod",
            "infrastructure_resource_group_name": "",
            "infrastructure_subnet_id": "",
            "internal_load_balancer_enabled": false,
            "location": "eastus2",
            "log_analytics_workspace_id": "",
            "logs_destination": "",
            "mutual_tls_enabled": false,
            "name": "aca-env-flowmazonapi-prod",
            "platform_reserved_cidr": "",
            "platform_reserved_dns_ip_address": "",
            "resource_group_name": "rg-flowmazon-api-prod",
            "static_ip_address": "130.213.232.196",
            "tags": null,
            "timeouts": null,
            "workload_profile": [],
            "zone_redundancy_enabled": false
          },
          "sensitive_values": {
            "dapr_application_insights_connection_string": true,
            "workload_profile": []
          },
          "depends_on": [
            "azurerm_resource_group.rg"
          ]
        },
        {
          "address": "azurerm_resource_group.rg",
          "mode": "managed",
          "type": "azurerm_resource_group",
          "name": "rg",
          "provider_name": "registry.terraform.io/hashicorp/azurerm",
          "schema_version": 0,
          "values": {
            "id": "/subscriptions/e4e37dab-f456-4968-939d-5c02a10b58de/resourceGroups/rg-flowmazon-api-prod",
            "location": "eastus2",
            "managed_by": "",
            "name": "rg-flowmazon-api-prod",
            "tags": null,
            "timeouts": null
          },
          "sensitive_values": {}
        }
      ]
    }
  }
}
